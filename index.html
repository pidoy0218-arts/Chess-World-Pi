<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Chess Arena Pi – Classic 10-min</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
:root{
  --bg:#111; --fg:#eee; --light:#f0f0f0; --dark:#b1e59f;
}
body{margin:0;padding:16px;background:var(--bg);color:var(--fg);font-family:system-ui,Arial;display:flex;flex-direction:column;align-items:center;}
h1{margin:6px 0 12px;font-size:22px;text-align:center;}
.wrap{display:flex;gap:18px;flex-wrap:wrap;align-items:flex-start;justify-content:center;}
#board{display:grid;grid-template-columns:repeat(8,60px);grid-template-rows:repeat(8,60px);border:6px solid #333;border-radius:10px;overflow:hidden;}
.sq{display:flex;align-items:center;justify-content:center;font-size:40px;}
.sq.light{background:var(--light);}
.sq.dark{background:var(--dark);}
.piece.white{color:#b8860b;text-shadow:2px 2px 0 #000;}
.piece.black{color:#000;}
.side{display:flex;flex-direction:column;gap:12px;}
.playerPanel{background:#1b1b1b;border:1px solid #2b2b2b;border-radius:10px;padding:10px;text-align:center;}
.playerName{font-weight:700;font-size:16px;margin-bottom:4px;}
.timer{font-weight:700;font-size:18px;margin-bottom:6px;}
.captured{display:flex;justify-content:center;gap:4px;min-height:24px;}
.moves{background:#1b1b1b;border:1px solid #2b2b2b;border-radius:10px;padding:10px;font-family:monospace;font-size:13px;max-height:200px;overflow:auto;}
</style>
</head>
<body>
<h1>♞ Chess Arena Pi – Classic 10-min</h1>

<div class="wrap">
  <div id="board"></div>

  <div class="side">
    <div class="playerPanel">
      <div class="playerName" id="p1">Player 1</div>
      <div class="timer" id="p1Timer">10:00</div>
      <div class="captured" id="p1Captured"></div>
    </div>
    <div class="playerPanel">
      <div class="playerName" id="p2">Player 2</div>
      <div class="timer" id="p2Timer">10:00</div>
      <div class="captured" id="p2Captured"></div>
    </div>
    <div class="moves" id="moves"></div>
  </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/chess.js/1.0.0/chess.min.js"></script>
<script>
const boardEl=document.getElementById('board');
const movesEl=document.getElementById('moves');
const game=new Chess();
let selected=null;

function renderBoard(){
  boardEl.innerHTML='';
  const b=game.board();
  for(let r=0;r<8;r++){
    for(let c=0;c<8;c++){
      const sq=document.createElement('div');
      sq.className='sq '+((r+c)%2?'dark':'light');
      const square='abcdefgh'[c]+(8-r);
      const piece=b[r][c];
      if(piece){
        const el=document.createElement('div');
        el.className='piece '+(piece.color==='w'?'white':'black');
        el.textContent=piece.type==='p'?'♟':
                        piece.type==='r'?'♜':
                        piece.type==='n'?'♞':
                        piece.type==='b'?'♝':
                        piece.type==='q'?'♛':'♚';
        sq.appendChild(el);
      }
      sq.addEventListener('click',()=>onClickSquare(square));
      boardEl.appendChild(sq);
    }
  }
}

function onClickSquare(square){
  if(selected){
    let move={from:selected,to:square,promotion:'q'};
    const result=game.move(move);
    if(result){
      selected=null;
      renderBoard();
      updateMoves();
    } else selected=null;
  } else {
    const piece=game.get(square);
    if(piece && piece.color===game.turn()) selected=square;
  }
}

function updateMoves(){
  movesEl.textContent=game.history().join(' ');
}

renderBoard();
updateMoves();

/* ----------- Timers ----------- */
let timers={w:600,b:600};
const p1TimerEl=document.getElementById('p1Timer');
const p2TimerEl=document.getElementById('p2Timer');
setInterval(()=>{
  if(game.game_over()) return;
  const turn=game.turn();
  timers[turn]--;
  const wMin=Math.floor(timers.w/60), wSec=timers.w%60;
  const bMin=Math.floor(timers.b/60), bSec=timers.b%60;
  p1TimerEl.textContent=`${wMin}:${wSec.toString().padStart(2,'0')}`;
  p2TimerEl.textContent=`${bMin}:${bSec.toString().padStart(2,'0')}`;
},1000);
</script>
</body>
</html>
