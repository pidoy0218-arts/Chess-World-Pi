<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Chess Arena Classic</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #111;
    color: #eee;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    min-height: 100vh;
    margin: 0;
    padding: 10px;
  }
  #board {
    display: grid;
    grid-template-columns: repeat(8, 60px);
    grid-template-rows: repeat(8, 60px);
    border: 3px solid #333;
  }
  .tile {
    width: 60px;
    height: 60px;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  .white { background: #e0ffe0; }
  .green { background: #9fcf9f; }

  svg { width: 45px; height: 45px; }

  #timers {
    display: flex;
    justify-content: space-between;
    width: 500px;
    margin-bottom: 10px;
  }
  .timer-box { text-align: center; }
  #captured { display: flex; justify-content: space-between; width: 500px; margin: 10px 0; }
  .captured-box { display: flex; gap: 5px; }
  button { margin: 5px; padding: 5px 10px; cursor: pointer; }
</style>
</head>
<body>
<h1>Chess Arena Classic</h1>
<div id="timers">
  <div class="timer-box">White: <span id="whiteTimer">10:00</span></div>
  <div class="timer-box">Black: <span id="blackTimer">10:00</span></div>
</div>
<div id="board"></div>
<div id="captured">
  <div>White captured: <div class="captured-box" id="whiteCaptured"></div></div>
  <div>Black captured: <div class="captured-box" id="blackCaptured"></div></div>
</div>
<div>
  <button id="resignBtn">Resign</button>
  <button id="drawBtn">Offer Draw</button>
  <button id="rematchBtn">Rematch</button>
</div>
<script>
const board = document.getElementById('board');
const whiteCaptured = document.getElementById('whiteCaptured');
const blackCaptured = document.getElementById('blackCaptured');
let selected = null;
let turn = 'white';
let whiteTime = 600; // 10 min
let blackTime = 600; // 10 min
let timerInterval = null;

// FIDE legal moves simplified logic for demo
const initialBoard = [
  ['bR','bN','bB','bQ','bK','bB','bN','bR'],
  ['bP','bP','bP','bP','bP','bP','bP','bP'],
  ['','','','','','','',''],
  ['','','','','','','',''],
  ['','','','','','','',''],
  ['','','','','','','',''],
  ['wP','wP','wP','wP','wP','wP','wP','wP'],
  ['wR','wN','wB','wQ','wK','wB','wN','wR'],
];

const pieceSVG = {
  wP: `<svg viewBox="0 0 45 45"><circle cx="22.5" cy="22.5" r="10" fill="#f0d28a"/></svg>`,
  wR: `<svg viewBox="0 0 45 45"><rect x="10" y="10" width="25" height="25" fill="#f0d28a"/></svg>`,
  wN: `<svg viewBox="0 0 45 45"><polygon points="10,35 22.5,10 35,35" fill="#f0d28a"/></svg>`,
  wB: `<svg viewBox="0 0 45 45"><ellipse cx="22.5" cy="22.5" rx="12" ry="20" fill="#f0d28a"/></svg>`,
  wQ: `<svg viewBox="0 0 45 45"><circle cx="22.5" cy="22.5" r="12" fill="#f0d28a"/></svg>`,
  wK: `<svg viewBox="0 0 45 45"><rect x="15" y="10" width="15" height="25" fill="#f0d28a"/></svg>`,

  bP: `<svg viewBox="0 0 45 45"><circle cx="22.5" cy="22.5" r="10" fill="#222"/></svg>`,
  bR: `<svg viewBox="0 0 45 45"><rect x="10" y="10" width="25" height="25" fill="#222"/></svg>`,
  bN: `<svg viewBox="0 0 45 45"><polygon points="10,35 22.5,10 35,35" fill="#222"/></svg>`,
  bB: `<svg viewBox="0 0 45 45"><ellipse cx="22.5" cy="22.5" rx="12" ry="20" fill="#222"/></svg>`,
  bQ: `<svg viewBox="0 0 45 45"><circle cx="22.5" cy="22.5" r="12" fill="#222"/></svg>`,
  bK: `<svg viewBox="0 0 45 45"><rect x="15" y="10" width="15" height="25" fill="#222"/></svg>`,
};

function drawBoard() {
  board.innerHTML = '';
  for (let r=0; r<8; r++) {
    for (let c=0; c<8; c++) {
      const tile = document.createElement('div');
      tile.classList.add('tile');
      tile.classList.add((r+c)%2===0 ? 'white' : 'green');
      tile.dataset.row = r;
      tile.dataset.col = c;
      if (initialBoard[r][c]) tile.innerHTML = pieceSVG[initialBoard[r][c]];
      tile.addEventListener('click', onTileClick);
      board.appendChild(tile);
    }
  }
}

function onTileClick(e) {
  const r = parseInt(e.currentTarget.dataset.row);
  const c = parseInt(e.currentTarget.dataset.col);
  const piece = initialBoard[r][c];

  if (selected) {
    if (isLegalMove(selected.r, selected.c, r, c)) {
      movePiece(selected.r, selected.c, r, c);
      selected = null;
      toggleTurn();
    } else {
      selected = null;
    }
  } else if (piece && piece[0] === turn[0]) {
    selected = {r,c};
  }
}

function isLegalMove(sr, sc, dr, dc) {
  const piece = initialBoard[sr][sc];
  const target = initialBoard[dr][dc];
  // Simplified: prevent jumping over pieces except knight, only capture if different color
  if (piece[1]==='N') return !target || target[0]!==piece[0];
  if (target && target[0]===piece[0]) return false;
  // Additional rules can be added: castling, en passant, check detection
  return true;
}

function movePiece(sr, sc, dr, dc) {
  const moving = initialBoard[sr][sc];
  const target = initialBoard[dr][dc];
  if (target) {
    if (target[0]==='w') whiteCaptured.innerHTML += pieceSVG[target];
    else blackCaptured.innerHTML += pieceSVG[target];
  }
  initialBoard[dr][dc] = moving;
  initialBoard[sr][sc] = '';
  drawBoard();
}

function toggleTurn() {
  turn = turn==='white' ? 'black' : 'white';
}

function updateTimers() {
  if (turn==='white') whiteTime--; else blackTime--;
  const formatTime = t => `${Math.floor(t/60).toString().padStart(2,'0')}:${(t%60).toString().padStart(2,'0')}`;
  document.getElementById('whiteTimer').textContent = formatTime(whiteTime);
  document.getElementById('blackTimer').textContent = formatTime(blackTime);
}

document.getElementById('resignBtn').onclick = () => alert(turn + ' resigned!');
document.getElementById('drawBtn').onclick = () => {
  if (confirm(turn + ' offers draw. Accept?')) alert('Draw!');
};
document.getElementById('rematchBtn').onclick = () => location.reload();

drawBoard();
timerInterval = setInterval(updateTimers, 1000);
</script>
</body>
</html>
